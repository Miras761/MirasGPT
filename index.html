<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GreenBot ü§ñ</title>
  <link rel="icon" href="https://emoji.gg/assets/emoji/7102-bot.png" />
  <style>
    /* (–°–µ–Ω—ñ“£ —Å—Ç–∏–ª–¥–µ—Ä—ñ“£–Ω—ñ“£ –±”ô—Ä—ñ —Å–∞“õ—Ç–∞–ª–¥—ã, “õ—ã—Å“õ–∞—Ä—Ç—É “Ø—à—ñ–Ω –±–µ—Ä–º–µ–π –æ—Ç—ã—Ä–º—ã–Ω ‚Äî –æ–ª–∞—Ä–¥–∞ –±”ô—Ä—ñ –∫–µ—Ä–µ–º–µ—Ç) */
    
    /* ... —Å–µ–Ω—ñ“£ –±–∞—Ä–ª—ã“õ CSS –∫–æ–¥—Ç–∞—Ä—ã“£ ... */

    /* Scroll to bottom button */
    #scroll-down {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background: #00ff88;
      color: #001a00;
      border: none;
      padding: 10px 14px;
      font-size: 18px;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      box-shadow: 0 0 10px rgba(0,255,136,0.5);
      z-index: 100;
      transition: all 0.3s ease;
    }

    #scroll-down:hover {
      transform: scale(1.1);
      background: #00cc66;
    }
  </style>
</head>
<body>

  <header class="glow-effect">
    ü§ñ GreenBot ‚Äî AI –∫”©–º–µ–∫—à—ñ“£
    <div class="bot-status">
      <div class="status-indicator"></div>
      –û–Ω–ª–∞–π–Ω –∂”ô–Ω–µ –¥–∞–π—ã–Ω
    </div>
  </header>
  
  <div id="chat-container">
    <div id="chat-box">
      <div class="message bot">
        –°”ô–ª–µ–º! –ú–µ–Ω ‚Äî GreenBot üå±<br>
        –°—ñ–∑–≥–µ “õ–∞–ª–∞–π –∫”©–º–µ–∫—Ç–µ—Å–µ –∞–ª–∞–º—ã–Ω? –ö–µ–∑ –∫–µ–ª–≥–µ–Ω —Å“±—Ä–∞“õ “õ–æ–π—ã“£—ã–∑.
      </div>
    </div>
    
    <div id="input-area">
      <input type="text" id="user-input" placeholder="–•–∞–±–∞—Ä–ª–∞–º–∞ –∂–∞–∑—ã“£—ã–∑..." />
      <button id="send-btn" onclick="sendMessage()">
        <span class="send-icon">üì§</span>
        –ñ—ñ–±–µ—Ä—É
      </button>
    </div>
  </div>

  <!-- Scroll to bottom button -->
  <button id="scroll-down" onclick="scrollToBottom()">‚¨á</button>

  <script>
    const chatBox = document.getElementById('chat-box');
    const scrollBtn = document.getElementById('scroll-down');
    const input = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');

    // Scroll to bottom
    function scrollToBottom() {
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å scroll button
    chatBox.addEventListener('scroll', () => {
      const atBottom = chatBox.scrollHeight - chatBox.scrollTop - chatBox.clientHeight < 100;
      scrollBtn.style.display = atBottom ? 'none' : 'block';
    });

    // Typing indicator
    function showTypingIndicator() {
      const typingDiv = document.createElement('div');
      typingDiv.className = 'typing-indicator';
      typingDiv.id = 'typing-indicator';
      typingDiv.innerHTML = `
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      `;
      chatBox.appendChild(typingDiv);
      scrollToBottom();
    }

    function hideTypingIndicator() {
      const typing = document.getElementById('typing-indicator');
      if (typing) typing.remove();
    }

    async function sendMessage() {
      const message = input.value.trim();
      if (!message) return;

      // Show user message
      const userMsg = document.createElement('div');
      userMsg.className = 'message user';
      userMsg.textContent = message;
      chatBox.appendChild(userMsg);
      scrollToBottom();

      input.value = '';
      input.disabled = true;
      sendBtn.disabled = true;
      sendBtn.innerHTML = '<span class="send-icon">‚è≥</span> –ñ—ñ–±–µ—Ä—ñ–ª—É–¥–µ...';

      showTypingIndicator();

      try {
        const res = await fetch("https://hook.eu2.make.com/4crgw0g7k5uu2lt2mwou7jhgt7ya70o7", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message })
        });

        const data = await res.text(); // If your Make returns JSON: use await res.json()

        hideTypingIndicator();

        const botMsg = document.createElement('div');
        botMsg.className = 'message bot';
        botMsg.textContent = data;
        chatBox.appendChild(botMsg);
        scrollToBottom();
      } catch (e) {
        hideTypingIndicator();

        const errorMsg = document.createElement('div');
        errorMsg.className = 'message bot';
        errorMsg.innerHTML = '‚ö†Ô∏è “ö–∞—Ç–µ: Make —Å–µ—Ä–≤–µ—Ä—ñ–Ω–µ “õ–æ—Å—ã–ª–∞ –∞–ª–º–∞–¥—ã–º.';
        chatBox.appendChild(errorMsg);
        scrollToBottom();
      }

      input.disabled = false;
      sendBtn.disabled = false;
      sendBtn.innerHTML = '<span class="send-icon">üì§</span> –ñ—ñ–±–µ—Ä—É';
      input.focus();
    }

    input.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        sendMessage();
      }
    });

    window.addEventListener('load', () => {
      input.focus();
      scrollToBottom();
    });
  </script>
</body>
</html>
